import React, { useState } from 'react'
import { IconCheck } from '@posthog/icons'

export default function CopyButton({ text }: { text: string }) {
    const [copied, setCopied] = useState(false)

    const handleCopy = async () => {
        await navigator.clipboard.writeText(text)
        setCopied(true)
        setTimeout(() => setCopied(false), 2000)
    }

    return (
        <button
            disabled={copied}
            className={`${copied ? '' : 'active:top-[0.5px] active:scale-[.90]'} relative outline-none`}
            onClick={handleCopy}
        >
            {copied ? (
                <IconCheck className="w-[18px] h-[18px] text-green" />
            ) : (
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M3.08 5.84H5.18V2.42C5.18 1.84 5.42 1.31 5.8 0.93C6 0.74 6.23 0.58 6.48 0.47C6.74 0.37 7.01 0.31 7.29 0.31H14.92C15.5 0.31 16.03 0.55 16.41 0.93C16.6 1.13 16.76 1.36 16.87 1.61C16.97 1.87 17.03 2.14 17.03 2.42V10.05C17.03 10.33 16.97 10.6 16.87 10.86C16.76 11.11 16.6 11.35 16.41 11.54C16.21 11.74 15.98 11.89 15.73 12C15.47 12.1 15.2 12.16 14.92 12.16H12.82V15.58C12.82 16.16 12.58 16.69 12.2 17.07C12.01 17.27 11.77 17.42 11.52 17.53C11.26 17.63 10.99 17.69 10.71 17.69H3.08C2.5 17.69 1.97 17.45 1.59 17.07C1.4 16.87 1.24 16.64 1.14 16.39C1.03 16.13 0.97 15.86 0.97 15.58V7.95C0.97 7.37 1.21 6.84 1.59 6.46C1.79 6.27 2.02 6.11 2.27 6C2.53 5.9 2.8 5.84 3.08 5.84ZM6.36 5.84H10.71C11.29 5.84 11.82 6.08 12.2 6.46C12.4 6.66 12.55 6.89 12.66 7.14C12.76 7.4 12.82 7.67 12.82 7.95V10.98H14.92C15.04 10.98 15.16 10.96 15.28 10.91C15.39 10.86 15.49 10.79 15.58 10.71C15.66 10.62 15.73 10.52 15.78 10.41C15.83 10.3 15.85 10.18 15.85 10.05V2.42C15.85 2.3 15.83 2.18 15.78 2.06C15.73 1.95 15.66 1.85 15.58 1.76C15.49 1.68 15.39 1.61 15.28 1.56C15.16 1.51 15.04 1.49 14.92 1.49H7.29C7.17 1.49 7.05 1.51 6.93 1.56C6.82 1.61 6.72 1.68 6.63 1.76C6.55 1.85 6.48 1.95 6.43 2.06C6.38 2.18 6.36 2.3 6.36 2.42V5.84ZM5.77 7.02H3.08C2.96 7.02 2.84 7.04 2.72 7.09C2.61 7.14 2.51 7.21 2.42 7.29C2.34 7.38 2.27 7.48 2.22 7.59C2.17 7.71 2.15 7.83 2.15 7.95V15.58C2.15 15.84 2.25 16.07 2.42 16.24C2.59 16.41 2.82 16.51 3.08 16.51H10.71C10.83 16.51 10.95 16.49 11.07 16.44C11.18 16.39 11.28 16.32 11.37 16.24C11.45 16.15 11.52 16.05 11.57 15.94C11.62 15.82 11.64 15.7 11.64 15.58V7.95C11.64 7.83 11.62 7.71 11.57 7.59C11.52 7.48 11.45 7.38 11.37 7.29C11.28 7.21 11.18 7.14 11.07 7.09C10.95 7.04 10.83 7.02 10.71 7.02H5.77Z"
                        fill="currentColor"
                        className="text-orange"
                    />
                </svg>
            )}
        </button>
    )
}

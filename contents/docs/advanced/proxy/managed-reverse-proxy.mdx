---
title: Managed reverse proxy
sidebar: Docs
showTitle: true
iconName: IconCode
---

import { Steps, Step } from 'components/Docs/Steps'

PostHog's managed reverse proxy routes traffic through PostHog's infrastructure. We handle provisioning, SSL certificates, and routing automatically.

## Prerequisites

- A PostHog account with our [platforms add-ons](https://posthog.com/platform-packages)
- Access to your domain's DNS settings

## Create a managed reverse proxy

<Steps>
<Step title="Create your proxy">

1. Go to [organization proxy settings](https://app.posthog.com/settings/organization-proxy).
2. Click **New Managed Proxy**.
3. Enter a subdomain you control. For example, if your app runs on `myapp.com`, use `ph.myapp.com`.

</Step>
<Step title="Create a DNS record">

Go to your DNS provider and create a new CNAME record:

1. Set the **Name** to the subdomain you chose, like `ph`.
2. Set the **Target** to the domain PostHog shows you. It looks like `4854cf84789d8596ad01.proxy-us.posthog.com`.
3. Save the record.

If you're using Cloudflare as your DNS provider, disable proxying on the CNAME record by setting it to **DNS only**.

</Step>
<Step title="Wait for provisioning">

Your proxy will go from **Waiting** to **Issuing** to **Live**. This usually takes a few minutes. No further action needed after creating the DNS record.

</Step>
<Step title="Update your PostHog SDK">

Update your PostHog initialization to use your new subdomain:

```js
posthog.init('<ph_project_api_key>', {
  api_host: 'https://ph.myapp.com',
  ui_host: 'https://us.posthog.com' // Use https://eu.posthog.com for EU region
})
```

Replace `ph.myapp.com` with your actual subdomain.

</Step>
</Steps>

## Troubleshooting

### CAA DNS records

If you have a CAA record on your domain, add Let's Encrypt as an issuer. Add this entry to your root domain or the specific subdomain:

```
0 issue "letsencrypt.org"
```

### Cloudflare proxy settings

If you're using Cloudflare as your DNS provider, make sure proxying is disabled on your CNAME record. The record should show **DNS only**, not **Proxied**.

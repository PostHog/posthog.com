---
title: Replit integration
sidebarTitle: Replit
icon: >-
  https://res.cloudinary.com/dmukukwp6/image/upload/replit_logo_9526a2cdb8.svg
---

import { CalloutBox } from 'components/Docs/CalloutBox'

The PostHog MCP integration lets Replit Agent set up analytics, error tracking, and feature flags in your project automatically. Once connected, you can also query your data, investigate errors, and manage experiments - all through natural language.

{/*TODO: Replace with actual demo video URL*/}
<ProductVideo
    videoLight="https://res.cloudinary.com/dmukukwp6/video/upload/placeholder_replit_demo.mp4"
    alt="Setting up PostHog with Replit Agent"
    classes="rounded"
    autoPlay={false}
/>

## Connect PostHog to Replit

import ReplitBadge from 'components/ReplitBadge'

1. <ReplitBadge mcpConfig="eyJkaXNwbGF5TmFtZSI6IlBvc3RIb2ciLCJiYXNlVXJsIjoiaHR0cHM6Ly9tY3AucG9zdGhvZy5jb20vbWNwIn0=" />
2. When prompted, log in to PostHog to authorize access
3. The PostHog MCP server is now available in your Replit Agent

<CalloutBox icon="IconFlag" title="EU region users" type="fyi">

If your PostHog project is on EU Cloud, use `https://mcp-eu.posthog.com/mcp` instead.

</CalloutBox>

## Set up PostHog in your project

Once connected, give Replit Agent this prompt to add PostHog with error tracking and source maps:

```text
Add PostHog to this project for error tracking and analytics with source map uploads.

Use the PostHog MCP to:
- Get the project API token (from projects-get) → set as VITE_POSTHOG_KEY
- Get the host URL → set as VITE_POSTHOG_HOST

Install packages: posthog-js and @posthog/cli

Create a PostHog client at client/src/lib/posthog.ts that:
- Initializes with capture_exceptions: true, autocapture: true, capture_pageview: true
- Uses env vars VITE_POSTHOG_KEY and VITE_POSTHOG_HOST
- Exports helper functions for captureException and captureEvent

Initialize PostHog in App.tsx with useEffect.

Update script/build.ts to:
- Build with sourcemap: true
- After build, run posthog-cli sourcemap inject then sourcemap upload
- Delete .map files from dist after upload (keep them private)
- Skip upload gracefully if POSTHOG_CLI_TOKEN or POSTHOG_CLI_ENV_ID aren't set
```

The agent will get your project credentials from the MCP (`projects-get` returns the API token), install the SDKs, and wire everything up.

After setup, add these as [Production app secrets](https://docs.replit.com/replit-workspace/workspace-features/secrets) (go to **Publish** → **Adjust settings**):

- `VITE_POSTHOG_KEY` - your project API token (MCP can provide this)
- `VITE_POSTHOG_HOST` - `https://us.i.posthog.com` or `https://eu.i.posthog.com`
- `POSTHOG_CLI_TOKEN` - create a [personal API key](https://us.posthog.com/settings/user-api-keys) with the MCP Server preset
- `POSTHOG_CLI_ENV_ID` - from your [error tracking settings](https://us.posthog.com/settings/project-error-tracking)

## What you can do with the MCP

Once set up, you can ask Replit Agent to interact with your PostHog data directly:

### Query your analytics

**Prompt:** "How many unique users signed up in the last 7 days, broken down by day?"

The agent will run a trends query and return daily signup counts with a breakdown.

**Prompt:** "What's the conversion rate from signup to first purchase?"

The agent will build a funnel query and calculate the conversion percentage between those two events.

### Investigate errors

**Prompt:** "What are the top 5 errors in my project this week?"

The agent will fetch error groups sorted by occurrence count, including how many users were affected.

**Prompt:** "Show me details about the most recent TypeError"

The agent will pull the stack trace, affected users, and browser/OS context for that error.

### Manage feature flags

**Prompt:** "Create a feature flag called 'new-checkout' enabled for 10% of users"

The agent will create the flag with a 10% rollout and return the configuration with a link to the flag in PostHog.

**Prompt:** "Update the 'beta-features' flag to 50% rollout"

The agent will modify the existing flag and confirm the new rollout percentage.

### Run experiments

**Prompt:** "Create an A/B test for the pricing page that measures conversion to checkout"

The agent will set up an experiment with control/test variants and configure a funnel metric measuring pricing page to checkout conversion.

See [all available MCP tools](/docs/model-context-protocol#available-tools) for the complete list.

## Troubleshooting

### Source maps not uploading

Check that `POSTHOG_CLI_TOKEN` and `POSTHOG_CLI_ENV_ID` are set as **secrets** in Replit. If they're not set, the build will succeed but source maps won't be uploaded.

### Events not appearing

Verify `VITE_POSTHOG_KEY` and `VITE_POSTHOG_HOST` are set correctly and that PostHog is initialized before your app renders.

### MCP not connecting

Try disconnecting and reconnecting the PostHog MCP server. Make sure you're logged into the correct PostHog account.

## Next steps

- [Error tracking docs](/docs/error-tracking) - Learn more about error tracking features
- [Source maps guide](/docs/error-tracking/source-maps) - Detailed source map configuration
- [Feature flags](/docs/feature-flags) - Set up feature flags in your code
- [MCP tools reference](/docs/model-context-protocol#available-tools) - All available MCP tools

Have feedback or questions? Let us know on [GitHub](https://github.com/PostHog/posthog/issues) or [ask a question](/questions).

---
title: v0 integration
sidebarTitle: v0
---

import { CalloutBox } from 'components/Docs/CalloutBox'

The PostHog MCP integration lets v0 set up analytics, error tracking, and feature flags in your project automatically. Once connected, you can also query your data, investigate errors, and manage experiments - all through natural language.

## Connect PostHog to v0

1. Open v0 and go to your project settings
2. Add the PostHog MCP server: `https://mcp.posthog.com/mcp`
3. When prompted, log in to PostHog to authorize access
4. The PostHog MCP server is now available in v0

<CalloutBox icon="IconFlag" title="EU region users" type="fyi">

If your PostHog project is on EU Cloud, use `https://mcp-eu.posthog.com/mcp` instead.

</CalloutBox>

## Set up PostHog in your project

Once connected, give v0 this prompt to add PostHog with error tracking and source maps:

```text
Add PostHog to this project for error tracking and analytics with source map uploads.

Use the PostHog MCP to:
- Get the project API token (from projects-get) → set as NEXT_PUBLIC_POSTHOG_KEY
- Get the host URL → set as NEXT_PUBLIC_POSTHOG_HOST

Install packages: posthog-js and @posthog/cli

Create a PostHog provider at app/providers.tsx that:
- Initializes PostHog with capture_exceptions: true, autocapture: true, capture_pageview: false (we'll handle pageviews manually for Next.js app router)
- Uses env vars NEXT_PUBLIC_POSTHOG_KEY and NEXT_PUBLIC_POSTHOG_HOST
- Wraps children in PostHogProvider

Create a pageview tracking component that captures page views on route changes.

Add an error boundary component that captures React errors to PostHog.

Wrap the app in the PostHog provider in app/layout.tsx.

Update next.config.js to enable source maps in production.

Add a postbuild script in package.json that:
- Runs posthog-cli sourcemap inject then sourcemap upload
- Deletes .map files after upload (keep them private)
- Skips gracefully if POSTHOG_CLI_TOKEN or POSTHOG_CLI_ENV_ID aren't set

For the source map upload secrets:
- Prompt me to provide POSTHOG_CLI_TOKEN
- Prompt me to provide POSTHOG_CLI_ENV_ID
```

The agent will get your project credentials from the MCP, install the SDKs, set up the provider with proper Next.js app router support, add an error boundary, and configure source map uploads. It will prompt you to provide the CLI secrets needed for source map uploads.

For source maps to work in production, add these environment variables in your Vercel project settings:

- `NEXT_PUBLIC_POSTHOG_KEY` - your project API token (MCP can provide this)
- `NEXT_PUBLIC_POSTHOG_HOST` - `https://us.i.posthog.com` or `https://eu.i.posthog.com`
- `POSTHOG_CLI_TOKEN` - create a [personal API key](https://us.posthog.com/settings/user-api-keys) with the MCP Server preset
- `POSTHOG_CLI_ENV_ID` - from your [error tracking settings](https://us.posthog.com/settings/project-error-tracking)

## What you can do with the MCP

Once set up, you can ask v0 to interact with your PostHog data directly:

### Query your analytics

**Prompt:** "How many unique users signed up in the last 7 days, broken down by day?"

The agent will run a trends query and return daily signup counts with a breakdown.

**Prompt:** "What's the conversion rate from signup to first purchase?"

The agent will build a funnel query and calculate the conversion percentage between those two events.

### Investigate errors

**Prompt:** "What are the top 5 errors in my project this week?"

The agent will fetch error groups sorted by occurrence count, including how many users were affected.

**Prompt:** "Show me details about the most recent TypeError"

The agent will pull the stack trace, affected users, and browser/OS context for that error.

### Manage feature flags

**Prompt:** "Create a feature flag called 'new-checkout' enabled for 10% of users"

The agent will create the flag with a 10% rollout and return the configuration with a link to the flag in PostHog.

**Prompt:** "Update the 'beta-features' flag to 50% rollout"

The agent will modify the existing flag and confirm the new rollout percentage.

### Run experiments

**Prompt:** "Create an A/B test for the pricing page that measures conversion to checkout"

The agent will set up an experiment with control/test variants and configure a funnel metric measuring pricing page to checkout conversion.

See [all available MCP tools](/docs/model-context-protocol#available-tools) for the complete list.

## Troubleshooting

### Source maps not uploading

Check that `POSTHOG_CLI_TOKEN` and `POSTHOG_CLI_ENV_ID` are set in your Vercel environment variables. If they're not set, the build will succeed but source maps won't be uploaded.

### Events not appearing

Verify `NEXT_PUBLIC_POSTHOG_KEY` and `NEXT_PUBLIC_POSTHOG_HOST` are set correctly and that the PostHog provider wraps your app.

### MCP not connecting

Try disconnecting and reconnecting the PostHog MCP server. Make sure you're logged into the correct PostHog account.

## Next steps

- [Next.js integration guide](/docs/libraries/next-js) - Detailed Next.js setup documentation
- [Error tracking docs](/docs/error-tracking) - Learn more about error tracking features
- [Source maps guide](/docs/error-tracking/source-maps) - Detailed source map configuration
- [Feature flags](/docs/feature-flags) - Set up feature flags in your code
- [MCP tools reference](/docs/model-context-protocol#available-tools) - All available MCP tools

Have feedback or questions? Let us know on [GitHub](https://github.com/PostHog/posthog/issues) or [ask a question](/questions).

---
title: Model Context Protocol (MCP)
---
import CalloutBox from '../../../src/components/Docs/CalloutBox'
import Tab from "components/Tab"
import CursorSnippet from "./_snippets/cursor.mdx"
import ClaudeDesktopSnippet from "./_snippets/claude-desktop.mdx"
import WindsurfSnippet from "./_snippets/windsurf.mdx"
import VSCodeSnippet from "./_snippets/vscode.mdx"
import ClaudeCodeSnippet from "./_snippets/claude-code.mdx"
import ZedSnippet from "./_snippets/zed.mdx"
import ReplitSnippet from "./_snippets/replit.mdx"
import MCPTools from '../../../src/components/Docs/MCPTools'
import V0Snippet from "./_snippets/v0.mdx"

The PostHog [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction) server enables your AI agents and tools to directly interact with PostHog's products.

## Quick install using the PostHog wizard

Besides being able to [quickly set up your project using AI](/docs/getting-started/install?tab=wizard), the [PostHog Wizard](https://github.com/PostHog/wizard) can also install the MCP server directly into **Cursor**, **Claude Code**, **Claude Desktop**, **VS Code** and **Zed**.

```bash
npx @posthog/wizard mcp add
```

We're working on adding more supported tools to the wizard. If you're using another option, you can manually install our MCP server with the instructions below.

## Manual install

Add the MCP configuration to your client. When you first use the MCP server, you'll be prompted to log in to PostHog to authenticate.

<CalloutBox icon="IconFlag" title="EU region users" type="fyi">

If your PostHog project is on EU Cloud, use `https://mcp-eu.posthog.com/mcp` instead.

</CalloutBox>

<Tab.Group tabs={['claude-code', 'claude-desktop', 'cursor', 'windsurf', 'vscode', 'zed', 'replit', 'v0']}>
    <Tab.List>
        <Tab>Claude Code</Tab>
        <Tab>Claude Desktop</Tab>
        <Tab>Cursor</Tab>
        <Tab>Windsurf</Tab>
        <Tab>VS Code</Tab>
        <Tab>Zed</Tab>
        <Tab>Replit</Tab>
        <Tab>v0</Tab>
    </Tab.List>
    <Tab.Panels>
        <Tab.Panel>
            <ClaudeCodeSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <ClaudeDesktopSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <CursorSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <WindsurfSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <VSCodeSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <ZedSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <ReplitSnippet />
        </Tab.Panel>
        <Tab.Panel>
            <V0Snippet />
        </Tab.Panel>
    </Tab.Panels>
</Tab.Group>

Be mindful of prompt injection â€“ LLMs can be tricked into following untrusted commands, so always review tool calls before executing them.

<details>

<summary>Using an API key instead of OAuth?</summary>

If your MCP client doesn't support OAuth, you can authenticate manually:

1. Create a [personal API key](https://app.posthog.com/settings/user-api-keys?preset=mcp_server) using the **MCP Server** preset (this scopes access to a specific project)
2. Add the `Authorization: Bearer YOUR_API_KEY` header to your MCP configuration

Example for Cursor (add to `.cursor/mcp.json`):

```json
{
  "mcpServers": {
    "posthog": {
      "url": "https://mcp.posthog.com/mcp",
      "headers": {
        "Authorization": "Bearer phx_your_api_key_here"
      }
    }
  }
}
```

</details>


## Available Tools

Tools trigger actions on behalf of the user based on the goals and information already in the context of the LLM.

Here's a list of tools we provide:

<MCPTools />

## Example prompts

Here are some examples of what you can ask your AI agent to do with the PostHog MCP server:

### Feature flag management

**Prompt:** "Create a feature flag called 'new-checkout-flow' that's enabled for 20% of users"

The agent will use the `create-feature-flag` tool to create the flag with a 20% rollout and return the configuration including the key, rollout percentage, and a link to the flag in PostHog.

### Analytics queries

**Prompt:** "How many unique users signed up in the last 7 days, broken down by day?"

The agent will use the `query-run` tool to execute a trends query and return daily signup counts.

### A/B test creation

**Prompt:** "Create an A/B test for our pricing page that measures conversion to checkout"

The agent will use `experiment-create` to set up an experiment with control/test variants and configure a funnel metric measuring pricing page to checkout conversion.

### Error investigation

**Prompt:** "What are the top 5 errors in my project this week?"

The agent will use the `list-errors` tool to fetch error groups sorted by occurrence count and return details including affected user counts.

## Prompts and resources

The MCP server provides **resources**, including framework-specific documentation and example code, to help agents build great PostHog integrations. You can try these yourself using the `posthog:posthog-setup` **prompt**, available via a slash command in your agent. Just hit the `/` key.

Currently we support Next.js, with more frameworks in progress.

## Privacy and support

- **Privacy Policy:** [posthog.com/privacy](/privacy)
- **Terms of Service:** [posthog.com/terms](/terms)
- **Support:** [posthog.com/questions](/questions) or email support@posthog.com

The MCP server acts as a proxy to your PostHog instance. It does not store your analytics data - all queries are executed against your PostHog project and results are returned directly to your AI client.

## Next steps

- [PostHog MCP server](https://github.com/PostHog/posthog/tree/master/services/mcp): Check out GitHub repository for the MCP server
- [Model Context Protocol](https://modelcontextprotocol.io/introduction): Learn more about the Model Context Protocol specification
- [MCP: machine/copy paste](/blog/machine-copy-paste-mcp-intro): What exactly is MCP again?

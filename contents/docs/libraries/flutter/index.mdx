---
title: Flutter
sidebarTitle: Flutter
sidebar: Docs
showTitle: true
github: 'https://github.com/PostHog/posthog-flutter'
platformLogo: flutter
features:
  eventCapture: true
  userIdentification: true
  autoCapture: false
  sessionRecording: true
  featureFlags: true
  groupAnalytics: true
  surveys: true
  llmAnalytics: false
  errorTracking: true
---

import FlutterIdentify from './_snippets/identify.mdx'

This is an optional library you can install if you're working with Flutter. It uses an internal queue to make calls fast and non-blocking. It also batches requests and flushes asynchronously, making it perfect to use in any part of your mobile app.

PostHog supports the iOS, macOS, Android and Web platforms.

## Installation

import FlutterInstall from '../../integrate/_snippets/install-flutter.mdx'

<FlutterInstall />

## Capturing events

import FlutterSendEvents from '../../integrate/send-events/_snippets/send-events-flutter.mdx'

<FlutterSendEvents />

## Identifying users

> We highly recommend reading our section on [Identifying users](/docs/integrate/identifying-users) to better understand how to correctly use this method.

<FlutterIdentify />

## Get the current user's distinct ID

You may find it helpful to get the current user's distinct ID. For example, to check whether you've already called `identify` for a user or not.

To do this, call `PostHog().getDistinctId()`. This returns either the ID automatically generated by PostHog or the ID that has been passed by a call to `identify()`.

## Alias

Sometimes, you want to assign multiple distinct IDs to a single user. This is helpful when your primary distinct ID is inaccessible. For example, if a distinct ID used on the frontend is not available in your backend. 

In this case, you can use `alias` to assign another distinct ID to the same user.

```dart
await Posthog().alias(
  alias: 'distinct_id',
);
```

We strongly recommend reading our docs on [alias](/docs/data/identify#alias-assigning-multiple-distinct-ids-to-the-same-user) to best understand how to correctly use this method.

## Anonymous vs identified events

import IdentifiedVsAnonymousIntro from '../../product-analytics/_snippets/identified-vs-anonymous-intro.mdx'

<IdentifiedVsAnonymousIntro />

### How to capture anonymous events

import HowToCaptureAnonymousEventsFlutter from '../../product-analytics/_snippets/how-to-capture-anonymous-events-flutter.mdx'

<HowToCaptureAnonymousEventsFlutter />

### How to capture identified events

import HowToCaptureIdentifiedEventsFlutter from '../../product-analytics/_snippets/how-to-capture-identified-events-flutter.mdx'

<HowToCaptureIdentifiedEventsFlutter />

## Super properties

Super properties are properties associated with events that are set once and then sent with every `capture` call, be it a `$screen`, or anything else.

They are set using `Posthog().register`, which takes a key and value, and they persist across sessions.

For example, take a look at the following call:

```dart
import 'package:posthog_flutter/posthog_flutter.dart';

await Posthog().register("team_id", 22)
```

The call above ensures that every event sent by the user will include `"team_id": 22`. This way, if you filtered events by property using `team_id = 22`, it would display all events captured on that user after the `Posthog().register` call, since they all include the specified super property.

However, please note that this does not store properties against the User, only against their events. To store properties against the User object, you should use `Posthog().identify`. More information on this can be found on the [Sending User Information section](#sending-user-information).

### Removing stored super properties

Super properties are persisted across sessions so you have to explicitly remove them if they are no longer relevant. In order to stop sending a super property with events, you can use `Posthog().unregister`, like so:

```dart
import 'package:posthog_flutter/posthog_flutter.dart';

await Posthog().unregister("team_id")
```

This will remove the super property and subsequent events will not include it.

If you are doing this as part of a user logging out you can instead simply use `Posthog().reset()` which takes care of clearing all stored super properties and more.

## Group analytics

Group analytics allows you to associate the events for that person's session with a group (e.g. teams, organizations, etc.). Read the [Group Analytics](/docs/user-guides/group-analytics) guide for more information.

> **Note:**  This is a paid feature and is not available on the open-source or free cloud plan. Learn more on the [pricing page](/pricing).

-   Associate the events for this session with a group

```dart
await Posthog().group(groupType: "company", groupKey: "company_id_in_your_db");
```

-   Associate the events for this session with a group AND update the properties of that group

```dart
await Posthog().group(
  groupType: "company", 
  groupKey: "company_id_in_your_db", 
  groupProperties: {
    "name": "ACME Corp"
});
```

The `name` is a special property which is used in the PostHog UI for the name of the group. If you don't specify a `name` property, the group ID will be used instead.

## Feature flags

import FeatureFlagsLibsIntro from "../_snippets/feature-flags-libs-intro.mdx"

<FeatureFlagsLibsIntro />

import FlutterFeatureFlagsCode from '../../integrate/feature-flags-code/_snippets/feature-flags-code-flutter.mdx'

<FlutterFeatureFlagsCode />

## Experiments (A/B tests)

Since [experiments](/docs/experiments/manual) use feature flags, the code for running an experiment is very similar to the feature flags code:

```dart
if (await Posthog().getFeatureFlag('experiment-feature-flag-key') == 'variant-name') {
    // Do something
}
```

It's also possible to [run experiments without using feature flags](/docs/experiments/running-experiments-without-feature-flags).

## Error tracking

To set up error tracking in your project, follow the [Flutter installation guide](/docs/error-tracking/installation/flutter).

## Session replay

> **Note:** Session replay is supported on the Flutter Web, Android and iOS environments.

To set up [session replay web](/docs/session-replay) or [mobile session replay](/docs/session-replay/mobile) in your project, all you need to do is install the Flutter SDK, follow the [additional installation instructions](/docs/session-replay/installation/flutter), and enable "Record user sessions" in [your project settings](https://us.posthog.com/settings/project-replay) and enable the `sessionReplay` option.

If you're using Flutter Web, also enable the [Canvas capture](/docs/session-replay/canvas-recording) in [your project settings](https://us.posthog.com/settings/project-replay).  
This is needed as Flutter renders your app using a browser canvas element.

## Surveys

> **Note:** Surveys is supported in Flutter for **Web**, **iOS** and **Android** platforms. 

[Surveys](/docs/surveys) launched with [popover presentation](/docs/surveys/creating-surveys#presentation) are automatically shown to users matching the [display conditions](/docs/surveys/creating-surveys#display-conditions) you set up.

## Offline behavior

The PostHog Flutter SDK will continue to capture events when the device is offline for Android and Apple platforms. The events are stored in a queue in the device's file storage and are flushed when the device is online.

- The queue has a maximum size defined by `maxQueueSize` in the configuration.
- When the queue is full, the oldest event is deleted first.
- The queue is flushed when the app is restarted and the device is online.

## Opt out of data capture

You can disable data collection for a user at any time using the `disable()` method:

```dart
await Posthog().disable();
```

This prevents any future events from being sent. It doesnâ€™t remove events already captured for the user.
To opt the user back in:

```dart
await Posthog().enable();
```

To check if a user is opted out:

```dart
await Posthog().isOptedOut();
```

## Debug mode 

If you're not seeing the expected events being captured, the feature flags being evaluated, or the surveys being shown, you can enable debug mode to see what's happening. 

You can enable debug mode during initialization by setting the `debug` option to `true` in the `PostHogConfig` object. A common pattern is to set this to `true` in development environments only using environment variables.

```dart
final config = PostHogConfig('<ph_project_api_key>');
config.host = '<ph_client_api_host>';
config.debug = true; // +
await Posthog().setup(config);
```

This will enable verbose logs about the inner workings of the SDK.

You can also enable debug by calling the `Posthog().debug()` method in your code.

```dart
await Posthog().debug();
```
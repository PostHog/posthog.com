---
title: JavaScript Web setup
sidebarTitle: JavaScript Web
sidebar: Docs
showTitle: true
github: 'https://github.com/PostHog/posthog-js'
icon: >-
  https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/integrate/js.svg
features:
  eventCapture: true
  userIdentification: true
  autoCapture: true
  sessionRecording: true
  featureFlags: true
  groupAnalytics: true
  surveys: true
  llmObservability: false
  errorTracking: true
---

> **Note:** This doc refers to our [posthog-js](https://github.com/PostHog/posthog-js) library for use on the browser. For server-side JavaScript, see our [Node SDK](/docs/libraries/node).

## Installation

import JSInstall from '../../integrate/_snippets/install-web.mdx'

<JSInstall />

### Track across marketing website &amp; app

We recommend putting PostHog both on your homepage and your application if applicable. That means you'll be able to follow a user from the moment they come onto your website, all the way through signup and actually using your product.

> PostHog automatically sets a cross-domain cookie, so if your website is `yourapp.com` and your app is on `app.yourapp.com` users will be followed when they go from one to the other. See our tutorial on [cross-website tracking](/tutorials/cross-domain-tracking) if you need to track users across different domains.

### Permitted domains

You can also configure "permitted domains" in your [project settings](https://app.posthog.com/project/settings). These are domains where you'll be able to record user sessions and use the PostHog toolbar.

## Opt out of data capture

You can completely opt-out users from data capture. To do this, there are two options:

1. Opt users out by default by setting `opt_out_capturing_by_default` to `true` in your [PostHog config](/docs/libraries/js/config).

```js-web
posthog.init('<ph_project_api_key>', {
    opt_out_capturing_by_default: true,
});
```

2. Opt users out on a per-person basis by calling `posthog.opt_out_capturing()`.

Similarly, you can opt users in:

```js-web
posthog.opt_in_capturing()
```

To check if a user is opted out:

```js-web
posthog.has_opted_out_capturing()
```

## Running more than one instance of PostHog at the same time

While not a first-class citizen, PostHog allows you to run more than one instance of PostHog at the same time if you, for example, want to track different events in different posthog instances/projects.

`posthog.init` accepts a third parameter that can be used to create named instances.

```ts
posthog.init('<ph_project_api_key>', {}, 'project1')
posthog.init('<ph_project_api_key>', {}, 'project2')
```

You can then call these different instances by accessing it on the global `posthog` object

```ts
posthog.project1.capture("some_event")
posthog.project2.capture("other_event")
```
> **Note:** You'll probably want to disable autocapture (and some other events) to avoid them from being sent to both instances. Check all of our [config options](/docs/libraries/js/config) to better understand that.

## Debugging

To see all the data that is being sent to PostHog, you can run `posthog.debug()` in your dev console or set the `debug` option to `true` in the `init` call.

## Development

For instructions on how to run `posthog-js` locally and setup your development environment, please checkout the README on the [posthog-js](https://github.com/PostHog/posthog-js#README) repository.


[session_recording_default]: https://github.com/PostHog/posthog-js/blob/96fa9339b9c553a1c69ec5db9d282f31a65a1c25/src/posthog-core.js#L1032
[cache_docs]: https://developer.mozilla.org/en-US/docs/Web/API/RequestInit#cache
[nextjs_documentation]: https://nextjs.org/docs/app/api-reference/functions/fetch#fetchurl-options
[nextjs_options]: https://nextjs.org/docs/app/api-reference/functions/fetch#optionsnextrevalidate
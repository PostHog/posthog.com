---
title: How to control which sessions you record
availability:
  free: full
  selfServe: full
  enterprise: full
---

import { ProductScreenshot } from 'components/ProductScreenshot'
export const ImgSampleConfigLight = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/tutorials/limit-session-recordings/sampling-config-light-mode.png"
export const ImgSampleConfigDark = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/tutorials/limit-session-recordings/sampling-config-dark-mode.png"
export const ImgMinDurationLight = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/tutorials/limit-session-recordings/min-duration-light-mode.png"
export const ImgMinDurationDark = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/tutorials/limit-session-recordings/min-duration-dark-mode.png"

There are several ways to control which sessions you record:

## Programmatically start and stop recordings

1. Ensure your domain is added to the [Authorized Domains list](https://app.posthog.com/settings/project-replay#replay-authorized-domains).


2. Set `disable_session_recording: true` in your [config](/docs/integrate/client/js/#config).

```js-web
posthog.init('<ph_project_api_key>', {
    api_host: '<ph_client_api_host>',
    disable_session_recording: true,
    // ... other options
})
```

3. Manually start recording by calling `posthog.startSessionRecording()`. Similarly, you can stop the recording at any point by calling `posthog.stopSessionRecording()`.

## With feature flags

You can select a [feature flag](/docs/feature-flags) to control whether to record sessions or not. Recordings will only be collected for users when the flag is enabled for them.

1. [Create a boolean flag](/docs/feature-flags/creating-feature-flags) that determines whether to record sessions or not.
2. Go to the [replay ingestion settings page](https://us.posthog.com/settings/project-replay#replay-ingestion).
3. Link your newly created flag in the **Enable recordings using feature flag**.

<ProductScreenshot
    imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/v1725441098/posthog.com/contents/Screenshot_2024-09-04_at_10.11.12_AM.png" 
    imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/v1725441098/posthog.com/contents/Screenshot_2024-09-04_at_10.11.20_AM.png"
    alt="Selecting a feature flag to control session recordings" 
    classes="rounded"
/>

## Sampling

Sampling enables you to record a percentage of all sessions. To set a sampling rate, go to the [replay ingestion settings page](https://us.posthog.com/settings/project-replay#replay-ingestion).

<ProductScreenshot
    imageLight={ImgSampleConfigLight} 
    imageDark={ImgSampleConfigDark}
    alt="Sampling config shown set to 100% i.e. no sampling" 
    classes="rounded"
/>

Our recommendation is to start with capturing 100% of sessions and decrease it as needed. This helps you get a sense of how many sessions you’re recording and how much data you’re collecting.

Note that sampling reduces the number of sessions you record, but it doesn’t let you control which sessions are recorded.

### Overriding sampling

Since [posthog-js](/docs/libraries/js) version 1.119.0, you can begin a recording regardless of sampling by calling `posthog.startSessionRecording({sampling: true})`

## Minimum duration

In your [replay ingestion settings](https://us.posthog.com/settings/project-replay#replay-ingestion), you can set a minimum duration for sessions to be recorded. 

<ProductScreenshot
    imageLight={ImgMinDurationLight} 
    imageDark={ImgMinDurationDark}
    alt="Minimum duration config shown set to 2 seconds" 
    classes="rounded"
/>

This is useful if you want to exclude sessions that are too short to be useful. For example, you might want to exclude sessions that are less than 2 seconds long to avoid recording sessions where users quickly bounce off your site.

### Limitations

The minimum duration is set in seconds. Whenever a new session starts, the browser records the start time. If the minimum duration has passed since the start time, the session data is sent. If it hasn't, the session continues to be buffered in-memory. 

This means that if you set a high minimum duration and your user visits multiple pages each for a short time, you still record the session but miss the beginning. If the user leaves the site before the minimum duration has passed, the session is not recorded.

If you find you are missing the beginning of sessions, you can reduce the minimum duration or use one of our other methods to reduce the number of sessions you record.

## Billing Limits

You can set a [billing limi](https://posthog.com/docs/billing/limits-alerts). We'll stop ingesting recordings when you reach your limit. 
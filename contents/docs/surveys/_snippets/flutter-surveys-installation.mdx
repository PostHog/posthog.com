## Step one: Add PostHog to your app

Using it requires PostHog's Flutter SDK version >= 5.8.0, but it's recommended to always use [the latest version](/docs/sdk-doctor).

import FlutterInstallManual from "../../integrate/_snippets/install-flutter-manual.mdx"

> ⚠️ **Note:** For mobile surveys, you must setup the SDK manually.

<FlutterInstallManual />

## Step two: Install PosthogObserver

For surveys to be shown, you need to add the `PosthogObserver` to your app. The observer allows PostHog to determine the appropriate context for displaying surveys.

```dart
import 'package:flutter/material.dart';

import 'package:posthog_flutter/posthog_flutter.dart';

class MyApp extends StatefulWidget {
  const MyApp({super.key});

  @override
  State<MyApp> createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {
  @override
  void initState() {
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return PostHogWidget(
      child: MaterialApp(
        navigatorObservers: [PosthogObserver()],
        title: 'My App',
        home: const HomeScreen(),
      ),
    );
  }
}
```

If you're using `go_router`, check [this page](/docs/libraries/flutter#capturing-screen-views) to learn how to set up the `PosthogObserver`.

## Configuration

Surveys are enabled by default. If you want to disable surveys, you can do so when setting up your SDK instance:

```dart
final config = PostHogConfig('<ph_project_api_key>');

config.surveys = false; // Disable surveys
```

## Supported Features

| Feature                           | Support                | 
| --------------------------------- | ---------------------- |
| **Questions**                                              |
| All question types                | ✅                     |
| Multi-question surveys            | ✅                     |
| Confirmation message              | ✅                     |
| Feedback button presentation      | ❌                     |
| Conditional questions             | ✅                     |
| **Customization / Appearance**                            |
| Set colors in PostHog dashboard   | ✅                     | 
| Shuffle questions                 | ❌                     | 
| PostHog branding                  | ❌                     | 
| Delay popup after screen view     | ❌                     | 
| Position config                   | ❌ Always bottom sheet | 
| HTML content                      | ❌                     |
| **Display conditions**                                     |
| Feature flag & property targeting | ✅                     | 
| Screen/URL targeting              | ❌                     | 
| Device type targeting             | ✅                     | 
| Survey wait period                | ❌                     | 
| Event triggers                    | ✅                     | 
| Action triggers                   | ❌                     | 
| Partial responses                 | ❌                     |

## Limitations

- On Android, requires API >= 26.
- On iOS, minimum deployment target is [iOS13](/docs/libraries/ios).
- Requires PostHog Flutter SDK version >= 5.8.0

## Troubleshooting

- Update your SDK and iOS Pods.
- Make sure to set the minimum platform version to iOS 13.0 in your Podfile.
- Make sure you have disabled automatic SDK initialization. 
- Run a clean build if you experience issues.
- If surveys are not being displayed when triggered, make sure you have installed the [PosthogObserver](/docs/surveys/installation?tab=Flutter#step-two-install-posthogobserver).
  - Using [navigationObservers](/docs/libraries/flutter#capturing-screen-views#using-navigatorobservers)
  - Using [go_router](/docs/libraries/flutter#capturing-screen-views#using-go-router)
- If you are using multiple navigation observers and encounter a log message `[PostHog] Cannot show survey: No valid context found...`, try placing `PosthogObserver` first in the list of observers. We've noticed that order sometimes matters due to potential interference.

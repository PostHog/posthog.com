Next.js enables you to both server-side render pages and add server-side functionality. To integrate PostHog into your Next.js app on the server-side, you can use the [Node SDK](/docs/libraries/node).

First, install the `posthog-node` library:

import InstallNodePackageManagers from "../install-node-package-managers.mdx"

<InstallNodePackageManagers />

### Router-specific instructions

import Tab from "components/Tab"
import AppRouterServerSetup from "./app-router-server-setup.mdx"
import PagesRouterServerSetup from "./pages-router-server-setup.mdx"

<Tab.Group tabs={[
    'App router', 
    'Pages router']}>
    <Tab.List>
        <Tab>App router</Tab>
        <Tab>Pages router</Tab>
    </Tab.List>
    <Tab.Panels>
        <Tab.Panel>
            <AppRouterServerSetup />
        </Tab.Panel>
        <Tab.Panel>
            <PagesRouterServerSetup />
        </Tab.Panel>
    </Tab.Panels>
</Tab.Group>
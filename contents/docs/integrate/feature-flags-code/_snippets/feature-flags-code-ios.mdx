### Boolean feature flags

```swift
if (PostHogSDK.shared.isFeatureEnabled("flag-key")) {
    // Do something differently for this user

    // Optional: fetch the payload
    let matchedFlagPayload = PostHogSDK.shared.getFeatureFlagPayload("flag-key")
}
```

### Multivariate feature flags

```swift
if (PostHogSDK.shared.getFeatureFlag("flag-key") as? String == "variant-key") { // replace "variant-key" with the key of your variant
    // Do something differently for this user

    // Optional: fetch the payload
    let matchedFlagPayload = PostHogSDK.shared.getFeatureFlagPayload("flag-key")
}
```

### Ensuring flags are loaded before usage

Every time a user opens the app, we send a request in the background to fetch the feature flags that apply to that user. We store those flags in the storage.

This means that for most screens, the feature flags are available immediately â€“ **except for the first time a user visits**.

To handle this, you can use the `didReceiveFeatureFlags` notification to wait for the feature flag request to finish:

```swift
// Before SDK initialization
func application(_: UIApplication, didFinishLaunchingWithOptions _: [UIApplication.LaunchOptionsKey: Any]? = nil) -> Bool { 
    // your code

    // Register to didReceiveFeatureFlags notification
    NotificationCenter.default.addObserver(self, selector: #selector(receiveFeatureFlags), name: PostHogSDK.didReceiveFeatureFlags, object: nil)
    PostHogSDK.shared.setup(config)

    return true
}

// The "receiveFeatureFlags" method will be called when the SDK receives the feature flags from the server.
@objc func receiveFeatureFlags() {
    print("receiveFeatureFlags called")
}
```

Or manually using the `reloadFeatureFlags` after the SDK is initialized: 


``` swift
// After SDK initialization
func application(_: UIApplication, didFinishLaunchingWithOptions _: [UIApplication.LaunchOptionsKey: Any]? = nil) -> Bool { 
    // your code

    PostHogSDK.shared.setup(config)

    PostHogSDK.shared.reloadFeatureFlags {
        if PostHogSDK.shared.isFeatureEnabled("flag-key") {
            // do something
        }
    }

    return true
}

```

### Reloading feature flags

Feature flag values are cached. If something has changed with your user and you'd like to refetch their flag values, call:

```swift
PostHogSDK.shared.reloadFeatureFlags()
```

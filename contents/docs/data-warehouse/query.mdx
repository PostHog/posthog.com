---
title: Querying the data warehouse with SQL
sidebar: Docs
showTitle: true
availability:
  free: full
  selfServe: full
  enterprise: full
---

import { ProductScreenshot } from 'components/ProductScreenshot'
import { CalloutBox } from 'components/Docs/CalloutBox'

PostHog provides the full flexibility of SQL to query your data warehouse using the [SQL editor](/docs/data-warehouse/sql).

To create a query, go to the [SQL editor](https://us.posthog.com/sql). Here you can see and search the schema of all available sources and [PostHog tables](/docs/data-warehouse/sources/posthog) as well as saved views.

<ProductScreenshot
  imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/w_1600,c_limit,q_auto,f_auto/Clean_Shot_2025_08_26_at_13_07_22_2x_f4bfc84ae3.png" 
  imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/w_1600,c_limit,q_auto,f_auto/Clean_Shot_2025_08_26_at_13_07_45_2x_751fc31300.png"
  alt="SQL editor" 
  classes="rounded"
/>

Here you can:

1. Write your SQL query using your table like `SELECT * FROM stripe.prod.charge`
2. Click **Run** to see the results.
3. Modify your query using [SQL commands](/docs/data-warehouse/sql) and [functions](/docs/data-warehouse/sql/useful-functions) as needed to get the data you want like `select amount / 100 as dollar_charge, status from stripe.prod.charge`.

<ProductScreenshot
  imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/w_1600,c_limit,q_auto,f_auto/Clean_Shot_2025_08_26_at_13_19_11_2x_b1d7ce399f.png" 
  imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/w_1600,c_limit,q_auto,f_auto/Clean_Shot_2025_08_26_at_13_18_51_2x_e62db75b67.png" 
  alt="Querying a source in PostHog" 
  classes="rounded"
/>

4. Click **Create insight**.
5. Choose and customize your visualization.
6. Click **Save insight**.

<CalloutBox icon="IconInfo" title="Having trouble writing SQL?" type="fyi">

  [PostHog AI](/docs/posthog-ai) can help write SQL for you. Just click the icon in the corner of your screen and ask it to write or tweak your query for you.

</CalloutBox>

## SQL visualizations

SQL queries have multiple different visualization options including:

- Table (default)
- Big number
- Line chart
- Bar chart
- Stacked bar chart
- Area chart

By clicking on the **Visualization** tab below the query, you can customize the X-axis, Y-axis, legend, scale, goal lines, and more. Each visualization type has its own set of customization options.

For example, with tables, you can add conditional formatting rules. These enable you to highlight cells based on their value and are set up in the **Conditional formatting** tab.

<ProductScreenshot
  imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/Clean_Shot_2025_07_01_at_13_01_00_2x_181ae75d28.png" 
  imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/Clean_Shot_2025_07_01_at_13_02_28_2x_b3ba2d2d8a.png" 
  alt="Customizing a SQL visualization" 
  classes="rounded"
/>

## Querying multiple sources together

Much of the power of the data warehouse comes from combining multiple sources, like your Stripe or Hubspot data with your product analytics data. Two of the easiest ways of doing this are `WHERE IN` and `JOIN` SQL commands. 

import QueryJoinExample from './_snippets/query-join-example.mdx'

<QueryJoinExample />

## Query execution details

After running a query, execution details can help you understand the resource usage and execution time:

- **Memory usage**: Total memory consumed by the query
- **Data read**: Total amount of data read by the query
- **CPU time**: Processing time used by the CPU
- **Duration**: Duration of query execution in ClickHouse

Hover over **Execution details** to see additional information about how the query was executed.

<ProductScreenshot
  imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/q_auto,f_auto/pasted_image_2025_11_20_T13_39_06_799_Z_92c7985c92.png"
  imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/q_auto,f_auto/pasted_image_2025_11_20_T13_42_11_240_Z_6536dfc318.png"
  alt="SQL query execution details"
  classes="rounded"
/>

These metrics are helpful for optimizing queries, especially when working with large datasets or complex joins. As you develop and change your query, keep an eye on the impact of your changes on the metrics. Seeing a spike in bytes read might prompt you to use a more selective filter.

## Optimizing queries

import OptimalQueries from '../_snippets/optimal-queries.mdx'

<OptimalQueries />
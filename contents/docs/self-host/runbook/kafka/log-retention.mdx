---
title: Log retention
sidebar: Docs
showTitle: true
---

When kafka disk gets full the kafka pod gets stuck leading us to drop all incoming events until fixed. To avoid this we can use log retention policies. There are two configs we can set (both set minimum values and data can't be deleted beforehand):

1. time - [kafka docs](https://kafka.apache.org/documentation/#topicconfigs_local.retention.ms)
2. bytes - [kafka docs](https://kafka.apache.org/documentation/#topicconfigs_local.retention.bytes)

Note that the retention check loop by default is ran every 5min [retention check interval](https://kafka.apache.org/documentation/#brokerconfigs_log.retention.check.interval.ms), we can change it to be more frequent, but probably don't need to.

We want to minimize the probability of kafka disk getting full and losing events and maximize disk usage to have as long retention as possible to have data to recover from in case something broke about ingestion. Therefor we suggest setting time to be relatively low (2h or 24h) and bytes to be about 90% of the volume size.

---
title: Deploying to Azure
sidebarTitle: Azure
sidebar: Docs
showTitle: true
tags:
    - azure
---

import ClusterRequirementsSnippet from './snippets/cluster-requirements'
import InstallingSnippet from './snippets/installing'
import UpgradingSnippet from './snippets/upgrading'
import UninstallingSnippet from './snippets/uninstalling'
import TryUnsecureSnippet from './snippets/tryunsecure'

First, we need to set up a Kubernetes cluster (see the official Azure [documentation](https://docs.microsoft.com/en-us/azure/aks/kubernetes-walkthrough-portal#create-an-aks-cluster) for more info).

<ClusterRequirementsSnippet />

> Note: in order to reduce the overhead of managing stateful services like PostgreSQL, Kafka and ClickHouse by yourself, we suggest you to run them _outside_ Kubernetes and offload their provisioning, building and maintenance operations:
>
> * for PostgreSQL, take a look at [Azure Database for PostgreSQL](https://docs.microsoft.com/en-us/azure/postgresql)
> * for Apache Kafka, take a look at [Apache Kafka in Azure HDInsight](https://docs.microsoft.com/en-us/azure/hdinsight/kafka/apache-kafka-introduction) and [Confluent Cloud](https://www.confluent.io/confluent-cloud/)
> * for ClickHouse, take a look at [Altinity Cloud](https://altinity.com/cloud-database/)
>

## Chart configuration

Here's the minimal required `values.yaml` that we'll be using later. You can find an overview of the parameters that can be configured during installation under [chart configuration](/docs/self-host/deploy/configuration).
```yaml
cloud: "azure"
ingress:
  hostname: <your-hostname>
  nginx:
    enabled: true
cert-manager:
  enabled: true
kafka:
  persistence:
    size: 20Gi
```

### Installing the chart

<InstallingSnippet />


### Lookup external IP

```shell
kubectl get svc --namespace posthog posthog-ingress-nginx-controller
```
### Setting up DNS

Create a record from your desired hostname to the external IP.

## Troubleshooting
### I cannot connect to my PostHog instance after creation
<TryUnsecureSnippet />

## Upgrading the chart
<UpgradingSnippet />

## Uninstalling the chart
<UninstallingSnippet />

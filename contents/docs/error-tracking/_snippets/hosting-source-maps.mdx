If you don't upload source maps, PostHog will try to fetch them from your minified JavaScript bundles. This means your source maps must be publicly accessible without authentication.

We **recommend** uploading your source maps to PostHog instead for better reliability.

### Local development

Since source maps need to be publicly accessible for PostHog to fetch them, they won't be available when you're testing your app on `localhost`. You can upload your source maps to PostHog using the `posthog-cli` or you can use a proxy service like [ngrok](https://ngrok.com/) to make your local server accessible publicly.


### How PostHog fetches source maps

PostHog will try to access source maps in the following order:
1. PostHog will look for a `SourceMap` and `X-SourceMap` header when fetching your JavaScript bundle.
2. PostHog will look for a `//# sourceMappingURL=` comment in your JavaScript bundle.
3. PostHog will try appending a `.map` extension to the URL of your JavaScript bundle.

### Serving source maps with Next.js

Next.js disables source maps by default during production builds to prevent you from leaking your source on the client. You can opt-in with the `productionBrowserSourceMaps` configuration flag.

```ts file=next.config.js
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Enable source maps explicitly
  productionBrowserSourceMaps: process.env.GENERATE_SOURCEMAP !== 'false'
};

export default nextConfig;
```

For server-side code, you need to configure webpack to generate source maps.

```ts file=next.config.js
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  // Enable source maps explicitly
  productionBrowserSourceMaps: process.env.GENERATE_SOURCEMAP !== 'false',

    // Configure webpack for server side source map generation
    webpack: (config, { dev }) => { // +
        if (!dev) { // +
        config.devtool = 'source-map'; // +
        } // +
        return config // +
    }, // +
};
```

### Troubleshooting

You can verify that source maps are being generated by running `next build` and checking the `.next/server/chunks` and `.next/static/chunks` directories for a `<file>.js.map` file.

You can also visit the minified JavaScript bundle in your browser's developer tools and check the `Sources` tab for a `sourceMappingURL` comment, for example:
```js
//# sourceMappingURL=page-3719ae17309d681f.js.map
```
---
title: Nuxt error tracking installation
showStepsToc: true
---

import { Steps, Step } from 'components/Docs/Steps'

import CLIUpload from "../_snippets/cli/upload.mdx"
import CLIAuthenticate from "../_snippets/cli/authenticate.mdx"
import CLIDownload from "../_snippets/cli/download.mdx"
import InstallNuxt from "../../integrate/_snippets/install-nuxt.mdx"
import StepVerifyErrorTracking from "./_snippets/step-verify-error-tracking.mdx"
import StepUploadSourceMaps from "./_snippets/step-upload-source-maps.tsx"

For Nuxt v3.7 and above, we recommend using the official `@posthog/nuxt` module which provides automatic error tracking with built-in source map support. 

<Steps>
<Step title="Install the PostHog Nuxt module" subtitle="Your goal in this step: Install and configure the PostHog Nuxt module." badge="required">

Install the PostHog Nuxt module using your package manager:

<MultiLanguage>

```bash file=npm
npm install @posthog/nuxt
```

```bash file=Yarn
yarn add @posthog/nuxt
```

```bash file=pnpm
pnpm add @posthog/nuxt
```

```bash file=Bun
bun add @posthog/nuxt
```

</MultiLanguage>

Add the module to your `nuxt.config.ts` file:

```typescript file=nuxt.config.ts
export default defineNuxtConfig({
  modules: ['@posthog/nuxt'],

  // Enable source maps generation in both vue and nitro
  sourcemap: { 
    client: 'hidden' 
  },
  nitro: {
    rollupConfig: {
      output: {
        sourcemapExcludeSources: false,
      },
    },
  },

  posthogConfig: {
    publicKey: '<ph_project_api_key>', // Find it in project settings https://app.posthog.com/settings/project
    host: '<ph_client_api_host>', // Optional: defaults to https://us.i.posthog.com. Use https://eu.i.posthog.com for EU region
    clientConfig: {
      capture_exceptions: true, // Enables automatic exception capture on the client side (Vue)
    },
    serverConfig: {
      enableExceptionAutocapture: true, // Enables automatic exception capture on the server side (Nitro)
    },
    sourcemaps: {
      enabled: true,
      envId: '<ph_environment_id>', // Your environment ID from PostHog settings https://app.posthog.com/settings/environment#variables
      personalApiKey: '<ph_personal_api_key>', // Your personal API key from PostHog settings https://app.posthog.com/settings/user-api-keys
      project: 'my-application', // Optional: defaults to git repository name
      version: '1.0.0', // Optional: defaults to current git commit
    },
  },
})
```

The module will automatically:
- Initialize PostHog on both Vue (client side) and Nitro (server side)
- Capture exceptions on both client and server
- Generate and upload source maps during build

</Step>

<Step title="Manually capturing exceptions" subtitle="Your goal in this step: Manually capture exceptions in your Nuxt application." badge="optional">

Our module if set up as shown above already captures both client and server side exceptions automatically.

To send errors manually on the client side, import it and use the `captureException` method like this:

```vue component.vue
<script>
  const { $posthog } = useNuxtApp()

  if ($posthog) {
    const posthog = $posthog()
    posthog.captureException(new Error("Important error message"))
  }
</script>
```

On the server side instantiate PostHog using:

```js file=server/api/example.js focusOnLines=4-21
export default defineEventHandler(async (event) => {
  const distinctId = getCookie(event, 'distinct_id')

  const { PostHog } = await import('posthog-node');
  const runtimeConfig = useRuntimeConfig()

  const posthog = new PostHog(
    runtimeConfig.public.posthogPublicKey,
    { 
      host: runtimeConfig.public.posthogHost, 
    }
  );

  try {
    const results = await DB.query.users.findMany()
    return results
  } catch (error) {
    posthog.captureException(error)
  }
})
```

</Step>

<Step title="Build your project for production" badge="required">

Build your project for production by running the following command:

```bash
nuxt build
```

The PostHog module will automatically generate and upload source maps to PostHog during the build process.

</Step>

<Step checkpoint title="Verify source map upload" subtitle="Confirm source maps are being properly uploaded">

Before proceeding, confirm that source maps are being properly uploaded.

You can verify the injection is successful by checking your `.mjs.map` source map files for `//# chunkId=` comments. Make sure to serve these injected files in production, PostHog will check for the `//# chunkId` comments to display the correct stack traces.

<OSButton variant="secondary" asLink={true} className="my-2" size="sm" to="https://app.posthog.com/settings/project-error-tracking#error-tracking-symbol-sets" external>
    Check symbol sets in PostHog
</OSButton>

</Step>

<StepVerifyErrorTracking />

</Steps>

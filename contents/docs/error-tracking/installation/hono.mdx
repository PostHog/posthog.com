---
title: Hono error tracking installation
---

import { Steps, Step } from 'components/Docs/Steps'

<Steps>
<Step title="Installing PostHog Node.js SDK" badge="required">

Error tracking enables you to track, investigate, and resolve exceptions your customers face. Getting this working requires installing PostHog:

Start by installing the `posthog-node` package using your package manager.
```bash
npm install --save posthog-node
```

</Step>
<Step title="Exception handling example" badge="required">

Hono uses [`app.onError`](https://hono.dev/docs/api/exception#handling-httpexception) to handle uncaught exceptions. You can take advantage of this for error tracking. Remember to **export** your [project API key](https://app.posthog.com/settings/project#variables) as an environment variable.

```ts file=index.ts
import { env } from 'hono/adapter'
import { PostHog } from 'posthog-node'

app.onError((err, c) => {
  const { POSTHOG_PUBLIC_KEY } = env<{ POSTHOG_PUBLIC_KEY:string }>(c)
  const posthog = new PostHog(POSTHOG_PUBLIC_KEY, { host: '<ph_client_api_host>' })
  
  posthog.captureException(new Error(err.message, { cause: err }), 'user_distinct_id_with_err_rethrow', {
    path: c.req.path,
    method: c.req.method,
    url: c.req.url,
    headers: c.req.header(),
    // ... other properties
  })
  posthog.shutdown() // TIP: On program exit, call shutdown to stop pending pollers and flush any remaining events
  // other error handling logic
  return c.text('Internal Server Error', 500)
})
```

</Step>

<Step checkpoint title="Verify exception capture" subtitle="Confirm you've captured an exception in PostHog">

Before proceeding, confirm that you've captured an exception in PostHog.

<div className="mt-4 mb-2">
  <CallToAction type="primary" to="https://app.posthog.com/activity/explore">
    Check for server-side exceptions in PostHog
  </CallToAction>
</div>

</Step>

<Step title="Next steps">

After configuring PostHog, you will start receiving exceptions in PostHog. To help you get more out of your error tracking, you can:

1. [Upload source maps](/docs/error-tracking/upload-source-maps/node) – Required for accurate stack traces if you serve minified bundles.
2. [Configure alerting](/docs/error-tracking/alerts) – Get notified when errors occur
3. [Cutting cost](/docs/error-tracking/cutting-costs) – Take advantage of our cost-effective pricing

</Step>
</Steps>

---
title: Upload source maps for React Native
showStepsToc: true
---

import CLIDownload from "../_snippets/cli/download.mdx"
import CLIAuthenticate from "../_snippets/cli/authenticate.mdx"
import StepVerifySymbolSetsUpload from '../_snippets/StepVerifySymbolSetsUpload'

<CalloutBox icon="IconInfo" title="React Native Web" type="action">

If you are using React Native Web, ensure source maps are generated

```bash
# example command
# Files are usually under the '$buildFolder/_expo/static/js/web' folder ($name.js and $name.js.map)
npx expo export --source-maps --platform web
```

Then use our standard [CLI approach](/docs/error-tracking/upload-source-maps/cli) to inject and upload them.

</CalloutBox>

<Steps>

<Step title="Download CLI" badge="required">

<CLIDownload/>

</Step>

<Step title="Authenticate" badge="required">

<CLIAuthenticate />

</Step>

<Step title="Inject" badge="required">

<CalloutBox icon="IconInfo" title="Expo 50 or later" type="fyi">

Automatic source map injection works only in React Native apps using Expo 50 or later, as it relies on Expoâ€™s built-in [debug ID](https://docs.expo.dev/versions/latest/config/metro/#source-map-debug-id) injection.

</CalloutBox>

Create or update the [metro.config.js](https://docs.expo.dev/versions/latest/config/metro/) file in your app's root directory so that it looks like this:

```diff

-const { getDefaultConfig } = require("expo/metro-config");
+const { getPostHogExpoConfig } = require('posthog-react-native/metro')


-const config = getDefaultConfig(__dirname);
+const config = getPostHogExpoConfig(__dirname)


module.exports = config
```

</Step>

<Step title="Upload" badge="required">

Automatic source map uploading is handled through the Gradle build process on Android and the Xcode build process on iOS.

<CalloutBox icon="IconWarning" title="EAS Updates" type="action">

If you are using [EAS Updates](https://docs.expo.dev/eas-update/introduction/), source maps must be uploaded manually after running the update command. The automatic upload via Gradle/Xcode only runs during native builds, not during OTA updates.

```bash
# After running `eas update` or `npx expo export --dump-sourcemap`, upload source maps from the output directory
posthog-cli exp hermes upload --directory dist
```

The `dist` folder is the default output directory for EAS updates.

</CalloutBox>

1. Expo: Update the [app.json](https://docs.expo.dev/versions/latest/config/app/#plugins) file in your app's root directory.

Expo Plugins that add modifications can only be used with [prebuilding](https://docs.expo.dev/workflow/continuous-native-generation/) and managed [EAS Build](https://docs.expo.dev/build/introduction/).

If you can use the `posthog-react-native/expo` plugin, skip steps 2 and 3. If not, proceed with steps 2 and 3.

Add the `posthog-react-native/expo` plugin under the `expo.plugins`.

```diff

{
  "expo": {
    ...
    "plugins": [
      ...
+     "posthog-react-native/expo"
    ]
  }
}
```

2. Android: Update the `/android/app/build.gradle` file from your app's root directory so that it looks like this:

```diff

...

// This must be placed directly above the following `android` block.
+apply from: new File(["node", "--print", "require('path').join(require('path').dirname(require.resolve('posthog-react-native')), '..', 'tooling', 'posthog.gradle')"].execute().text.trim())


android {
  ...
}
```

3. iOS: Update the `/ios/$yourProjectName.xcodeproj/project.pbxproj` file (replace `$yourProjectName` with your project's actual name). You need to locate the `Bundle React Native code and images` build step.

To do this through Xcode, open your project in Xcode, go to the project settings, navigate to Build Phases, select Bundle React Native code and images, and apply the changes shown below.

```diff

...

-`"$NODE_BINARY" --print "require('path').dirname(require.resolve('react-native/package.json')) + '/scripts/react-native-xcode.sh'"`
+/bin/sh `"$NODE_BINARY" --print "require('path').join(require('path').dirname(require.resolve('posthog-react-native')), '..', 'tooling', 'posthog-xcode.sh')"` `"$NODE_BINARY" --print "require('path').dirname(require.resolve('react-native/package.json')) + '/scripts/react-native-xcode.sh'"`
```

</Step>

<StepVerifySymbolSetsUpload />

</Steps>

---
title: Revenue analytics
sidebar: Docs
showTitle: true
availability:
  free: full
  selfServe: full
  enterprise: full
---

import { ProductScreenshot } from 'components/ProductScreenshot'

> **Important:** This feature is currently an opt-in beta. To access it, enable the [feature preview](https://app.posthog.com/settings/user-feature-previews%3Arevenue-analytics-beta). Please leave a comment on this page if you have feedback or questions, or leave feedback via the in-app support modal.

Our revenue tracking feature enables you to capture revenue from your website via the events you are already sending us, or via an integration between your payment platform and our Data Warehouse, which you can then track in your [revenue analytics dashboard](https://app.posthog.com/revenue_analytics).

<ProductScreenshot
    imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/Screenshot_2025_06_25_at_19_51_33_9f5267a861.png" 
    imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/Screenshot_2025_06_25_at_19_52_23_13027e113c.png"
    alt="revenue analytics dashboard"
    classes="rounded"
/>

## Choosing a revenue data source

PostHog can collect revenue from two sources:

### Option 1: Properties on events

The simplest way to send us revenue data is to add it as properties on revenue generating events, such as when a purchase is completed, a user starts a subscription, or a subscription is renewed.

When you do so, you need to include two properties:

- `value`: The amount of revenue generated by the event in their minor unit (cents of a dollar, pence of a pound, yen, etc.).
- `currency`: The currency of the revenue in ISO 4217 format (USD, EUR, GBP, etc.).

You can choose any name you like for these properties – you can customize them in the **Revenue** tab in [data management](https://app.posthog.com/data-management/revenue).

<ProductScreenshot
    imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/revenue_light_d1249bb62b.png" 
    imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/revenue_dark_fd7853dd07.png"
    alt="revenue tab"
    classes="rounded"
/>

The `currency` property is technically optional as you can choose a static currency when configuring your revenue event in your dashboard, but we recommend sending it if you can to ensure backward compatibility should you ever take payments in a different currency.

#### Currency minor unit

We always expect revenue to be sent in the minor unit of the currency. For example, enter:

- `1045` in `USD` (or any other two-decimal currency) is treated as $10.45
- `1045` in `JPY` (or any other zero-decimal currency)is treated as ¥1045

#### Zero-decimal currencies

All currencies are considered two-decimal currencies unless they are in the following list:

<div className="grid grid-cols-2 gap-2">
    <ul>
        <li>BIF</li>
        <li>CLP</li>
        <li>DJF</li>
        <li>GNF</li>
        <li>JPY</li>
        <li>KMF</li>
        <li>KRW</li>
        <li>MGA</li>
    </ul>
    <ul>
        <li>PYG</li>
        <li>RWF</li>
        <li>UGX</li>
        <li>VND</li>
        <li>VUV</li>
        <li>XAF</li>
        <li>XOF</li>
        <li>XPF</li>
    </ul>   
</div>

#### Known considerations

- The Icelandic Krona (ISK) is a zero-decimal currency, but we treat it as a two-decimal currency to keep backwards compatibility with our integration with Stripe.

### Option 2: Data warehouse tables

You can also expose your revenue data from your [Data Warehouse](/data-warehouse) tables.

The configuration for these is much simpler. You simply need to create a connection between PostHog and your revenue source and PostHog will automatically pick up the revenue data for you.
Please refer to the [Data Warehouse docs](/data-warehouse) for more information.

> **Important:** We currently only support Revenue Analytics data from Stripe. The Chargebee connector already exists and integration with Revenue Analytics is coming soon. We'll implement more sources in the near future. Check our roadmap at [our team page](/teams/revenue-analytics).

## Deferred revenue

When using revenue data from your Data Warehouse (like Stripe), PostHog will automatically defer revenue recognition to match your accounting practices. This is particularly useful for subscription businesses that need to recognize revenue over time rather than all at once.
This implies that our dashboard will show revenue in the future, indicating all of the revenue that will be recognized in the future.

> **Note**: Revenue deferring is automatically applied when using Stripe as your data source. You don't need to configure anything additional if you're already filling Stripe's `period` property on your invoice line items - PostHog handles the calculations based on the period information in your Stripe invoices.

### Revenue deferring on Stripe

PostHog's Stripe integration automatically handles revenue deferring based on the `period` property found in your Stripe invoice line items.

In Stripe, when you create a subscription or invoice, each line item can include a `period` object that defines the service period:

```json
{
  "line_items": [
    {
      "amount": 120000,
      "currency": "usd",
      "period": {
        "start": 1640995200,
        "end": 1672531200
      }
    }
  ]
}
```

The `period` object contains:
- `start`: Unix timestamp when the service period begins
- `end`: Unix timestamp when the service period ends

### How PostHog processes deferred revenue

When PostHog imports your revenue data, it automatically:

1. **Detects period information**: Looks for the `period` property on invoice line items
2. **Calculates deferral periods**: Determines how many months/days the revenue should be spread across
3. **Distributes revenue**: Splits the total amount evenly across the service period

For example, if you have an annual subscription where customers pay $1,200 upfront:
- **Without deferring**: All $1,200 appears in the month of payment
- **With deferring**: $100 appears in each of the 12 months of the subscription period

#### When deferring doesn't apply

Revenue deferring only applies when:
- You're using Stripe as your data source
- Your invoice line items include a `period` property
- The period spans multiple billing cycles

For one-time purchases or monthly subscriptions, revenue is recognized immediately in the month of payment.

## Using revenue data in product analytics

You can use your revenue data for deeper product analytics insights beyond the web analytics dashboard, too. This allows you to:

- Create custom revenue funnels
- Analyze user journeys that lead to purchases
- Segment users by revenue contribution

When working with revenue data in product analytics, you may want to use the [`convertCurrency` function](#can-i-query-converted-rates) for accurate reporting across different currencies.

We also expose streamlined views of your revenue data. You can find them under the `views` tab in our [SQL Editor](https://app.posthog.com/sql).

## Sending backend events for revenue tracking

You can send revenue tracking events from your backend systems, which is especially useful for tracking purchases that complete outside of the browser.

When sending backend events, it's recommended you include a `session_id` to ensure they can be properly associated with a web session. The session ID connects the backend purchase event with the user's web session.

The `session_id` should be a UUID V7 that uniquely identifies the user's session.

You can generate a random one, but ideally you should reuse the same value we generated in our Frontend SDK, so that all events belong to the same session in our UI.

You can learn more about how to do this in the [session docs](/docs/data/sessions#server-sdks-and-sessions).

Example backend event:
```javascript
posthog.capture({
    distinct_id: posthog_distinct_id,
    event: 'Purchase Succeeded',
    properties: {
        '$session_id': posthog_session_id,

        // 100.00 USD
        value: 10000, 
        currency: 'USD',
    }
})
```

## Troubleshooting & FAQ

### Can I change the default reporting currency in PostHog?

Yes. You can select your desired currency in the **Revenue** tab in **Data management**. This is the currency we'll use to *report* revenue in our revenue analytics dashboard.

<ProductScreenshot
    imageLight="https://res.cloudinary.com/dmukukwp6/image/upload/Captura_de_tela_2025_03_17_201104_33977aba84.png" 
    imageDark="https://res.cloudinary.com/dmukukwp6/image/upload/Captura_de_tela_2025_03_17_201051_e412bbb268.png"
    alt="base currency configuration"
    classes="rounded"
/>

### How do you convert revenue in different currencies?

We automatically convert revenue from other currencies into your chosen reporting currency – i.e. if someone makes a purchase in Canadian Dollars (CAD) and your reporting currency is US Dollars (USD), it's converted into USD in PostHog to ensure consistency.

PostHog's currency conversion data is sourced from [Open Exchange Rates](https://openexchangerates.org/). The exchange rate data is updated hourly and stored with daily granularity.

This ensures that your revenue data is converted using recent exchange rates, based on the exchange rate at the time of the event, providing reliable revenue analytics across different currencies.

### Which currencies do you support?

PostHog supports a wide range of global currencies for revenue tracking. See our [currencies.py file](https://github.com/PostHog/posthog/blob/master/posthog/models/exchange_rate/currencies.py) for a complete list.

### What if you don't support the currency on my revenue event?

This is unlikely given the large range of currencies we support, but in this event we'd track that revenue event as if it had `0` value. We welcome [feature requests](https://github.com/PostHog/posthog/issues/new?assignees=&labels=feature&template=feature_request.md&title=) for currencies you'd like us to support.

### Why isn't my revenue appearing in the revenue analytics dashboard?

If your revenue isn't appearing in your revenue analytics dashboard, there are a few common issues to check:

1. **Check the Revenue tab in Data management**: First, verify if your revenue events are being captured correctly by checking the [Revenue tab](https://app.posthog.com/data-management/revenue) in data management.
1. **Make sure Revenue tracking is enabled for you Data warehouse source**: Legacy data warehouse sources have revenue tracking disabled by default. Make sure you enable them in the [Revenue tab](https://app.posthog.com/data-management/revenue) in data management.
1. **Check your filters**: you can choose to enable/disable revenue tracking for specific events/sources in the Revenue analytics dashboard filter, make sure you have selected the desired entries.

### Can I query converted rates?

Yes, you can query converted rates yourself in SQL using the `convertCurrency` function. This is useful for custom queries and advanced analytics.

Example:

```sql
SELECT 
    *,
    properties.$currency as original_currency,
    properties.value as original_value,
    convertCurrency(original_currency, 'USD', original_value, _toDate(timestamp)) as value_usd
FROM events
WHERE event = 'purchase'
```

The signature for the `convertCurrency` function is:

```
convertCurrency(
    from_currency: string,
    to_currency: string,
    value: Decimal,
    timestamp: Date | DateTime
) -> Decimal
```

### Can I correlate revenue with paid ads data?

This feature is current under development. Soon, PostHog will support sources for importing ad expense data, allowing you to analyze return on ad spend directly within the platform.

###  Can I compute cost CAC and CPC?

Computing Customer Acquisition Cost (CAC) and Cost Per Click (CPC) will be possible once we've completed integrations with ad expense platforms. These metrics will provide valuable insights into your marketing efficiency and return on investment.

### Can I use custom currency conversion data?

Currently, PostHog does not support using custom currency conversion data. We rely on the exchange rates provided by Open Exchange Rates.

If you need support for custom conversion rates, please [create a feature request](https://github.com/PostHog/posthog/issues/new?assignees=&labels=feature&template=feature_request.md&title=), so our team can consider adding this functionality.

---
title: Troubleshooting and FAQs
---

import { ProductScreenshot } from 'components/ProductScreenshot'
export const PersonsFeatureFlagLight = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/feature-flags/persons-feature-flag-tab-light-mode.png"
export const PersonsFeatureFlagDark = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/feature-flags/persons-feature-flag-tab-dark-mode.png"
export const BehavioralCohortsLight = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/feature-flags/behavioral-cohorts-light-mode.png"
export const BehavioralCohortsDark = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/feature-flags/behavioral-cohorts-dark-mode.png"
export const DeuplicateAsStaticCohortLight = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/feature-flags/duplicate-as-static-cohort-light-mode.png"
export const DeuplicateAsStaticCohortDark = "https://res.cloudinary.com/dmukukwp6/image/upload/posthog.com/contents/images/docs/feature-flags/duplicate-as-static-cohort-dark-mode.png"

## Why is my feature flag not working as expected?

Here's a list of suggestions to troubleshoot your flag:

### 1. Check your flag evaluation on the feature flags tab

Check the **feature flags tab** on [the persons page](https://app.posthog.com/persons) for your specific person.

<ProductScreenshot
    imageLight={PersonsFeatureFlagLight} 
    imageDark={PersonsFeatureFlagDark}
    alt="Persons feature flag tab" 
    classes="rounded"
/>

- If the flag is shown as disabled here, check the "match evaluation" column to know the understand why.
- If the flag is shown as enabled here, there may be a problem in your code. Double-check the steps to [add feature flag code](/docs/feature-flags/adding-feature-flag-code).
- Ensure you are capturing identified events.

### 2. Check you're calling `identify()` before evaluating the flag

If you're [identifying](/docs/product-analytics/identify) users, they may see a different value for a feature flag before and after you call `identify()`. 

To ensure they experience consistent behavior, check that you call `identify()` before evaluating the feature flag.

> *Note*: This only applies to frontend SDKs. Server-side SDKs do not need to call `identify()`.

### 3. An ad-blocker may be blocking calls

Check if an ad-blocker is interfering with PostHog calls. If this is the case, you can fix this by [deploying a reverse proxy](/docs/advanced/proxy).

### 4. User or group properties may not have been ingested yet

If your [release conditions](/docs/feature-flags/creating-feature-flags#release-conditions) depend on user or group properties, and you immediately evaluate the feature flag after updating them, the properties may not be ingested in time to calculate the correct flag value.

In this case, when making your `getFeatureFlag()` call, you can [manually include these properties](/docs/feature-flags/adding-feature-flag-code?tab=Web#overriding-server-properties) in the method arguments.

### 5. Raise a support ticket

If none of the above resolve your issue, you can [raise a support ticket](https://app.posthog.com/home#supportModal) to see if we can help debug.

import FAQFalseOrNoneEvents from "./snippets/faq-false-or-none-events.mdx"

<FAQFalseOrNoneEvents />

## How can I reduce the latency of feature flag requests on my server?

Evaluating feature flags requires making a request to PostHog. However, you can [evaluate feature flags locally](/docs/feature-flags/bootstrapping-and-local-evaluation#server-side-local-evaluation) instead â€“ without having to make a request to PostHog.

## Why do feature flags sometimes cause my app to flicker?

By default, fetching flags from our servers takes about 100-500ms. During this time, the flag is disabled. When the request is complete, the flag is updated. This may be the cause of the flickering.

To fix this, you can [bootstrap feature flags](/docs/feature-flags/bootstrapping).

## Why can't I use a cohort with behavioral filters in my feature flag?

Behavioral cohorts are [dynamic cohorts](/docs/data/cohorts#dynamic-cohorts) created using an event or action filter (i.e., the options under the "behavioral" subheading)

<ProductScreenshot
    imageLight={BehavioralCohortsLight} 
    imageDark={BehavioralCohortsDark}
    alt="Behavioral cohorts" 
    classes="rounded"
/>

<Caption>
Behavioral cohorts are dynamic cohorts created using the options under the "behavioral" subheading.
</Caption>

Feature flags require fast evaluation and behavioral queries are relatively slow. Thus enabling these queries would significantly impact the performance of feature flags. 

A workaround is to create a dynamic behavioral cohort and then duplicate it as a static cohort (using the button on the top right of the cohort page).


<ProductScreenshot
    imageLight={DeuplicateAsStaticCohortLight} 
    imageDark={DeuplicateAsStaticCohortDark}
    alt="How to duplicate as static cohort" 
    classes="rounded"
/>

## Billing & usage

Feature flags are charged based requests made to our `/decide` endpoint, which is used to evaluate a feature flag for a given user. They are not billed based on `$feature_flag_called` events, which are optional events sent for metrics tracking, not for actual feature flag evaluation.

### How can I estimate the number of feature flag requests I'll be charged for?

import FlagChargeEstimate from "./snippets/flag-charge-estimate.mdx"

<FlagChargeEstimate />

### I have very few `$feature_flag_called` events when I look at a flag, but my bill is still very high, why is this?

`$feature_flag_called` events are captured whenever you call `getFeatureFlag()` or `isFeatureEnabled()`. Also, they're not sent every time and are only sent when the flag value changes for a given person. 

This is different from requests made to our servers to compute flags, which is what feature flag billable requests are. Thus, generally, there will be no relation between the number of `$feature_flag_called` events and the usage you see in your billing.

